{% extends 'base.html' %}

{% block content %}

<div class="container" style="padding-top:100px;">
	<div class="row justify-content-center">
		<div class="col-md-8">
			<div class="card bg-dark text-white">
				<div class="card-header d-flex justify-content-between align-items-center">
					<h5 class="mb-0">Mi Perfil</h5>
					<div>
						<a href="{% url 'home' %}" class="btn btn-sm btn-outline-light me-2">Volver</a>
						<a href="{% url 'salir' %}" class="btn btn-sm btn-outline-danger">Cerrar sesión</a>
					</div>
				</div>
				<div class="card-body">
					<div class="d-flex align-items-center mb-4">
						<img src="{{ avatar_url }}" alt="Avatar" class="rounded-circle me-3" width="100" height="100">
						<div>
							<h4 class="mb-0">{{ user_obj.usuario }}</h4>
							<small class="text-muted">ID: {{ user_obj.id }} • Email: {{ user_obj.email }}</small>
						</div>
					</div>

					<div class="row">
						<div class="col-md-6">
							<h6>Plan actual</h6>
							<p>{{ plan_actual }}</p>
						</div>
						<div class="col-md-6">
							<h6>Pagos registrados</h6>
							<p>{{ pagos_count }}</p>
						</div>
					</div>

					<div class="row mt-3">
						<div class="col-md-6">
							<h6>Estado</h6>
							<p>{% if user_obj.is_active %}Activo{% else %}Inactivo{% endif %}</p>
						</div>
						<div class="col-md-6">
							<h6>Permisos</h6>
							<p>{% if user_obj.is_staff %}Staff / Admin{% else %}Usuario{% endif %}</p>
						</div>
					</div>

					<div class="mt-4">
						<a href="{% url 'password_change' %}" class="btn btn-outline-light">Cambiar contraseña</a>
						<a href="{% url 'rutas' %}" class="btn btn-outline-secondary ms-2">Ver mis rutas</a>
					</div>

					{% if ultimo_pago_fecha %}
						<div class="mt-3 text-muted small">Último pago: {{ ultimo_pago_fecha }}</div>
					{% endif %}

				</div>
			</div>
		</div>
	</div>
</div>

{% endblock %}
