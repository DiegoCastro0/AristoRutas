{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/sugerenciafondo.css' %}">

<main class="sugerencias-hero">
  <section class="sugerencias-card">
    <!-- Texto introductorio -->
    <div class="sugerencias-text">
      No todos ven el camino.
      Algunos lo sienten.
      Si has sentido el llamado, si el trayecto se te ha revelado en sueños, en repeticiones, en señales… entonces habla.
      Describe el sendero como si ya lo hubieras recorrido mil veces.
      No sugieras: profetiza.
      Porque en AristoRutas no trazamos rutas. Las obedecemos.
    </div>

    <!-- Formulario -->
    <form method="POST" action="{% url 'sugerencias' %}">
      {% csrf_token %}
      <div>
        <textarea class="sugerencias-textarea" name="sugerencia" placeholder="Escribe aquí tu sugerencia o visión..." required></textarea>
      </div>

      <div class="sugerencias-actions">
        <button type="submit" class="btn btn-primary">Enviar</button>
        <a href="{% url 'rutas' %}" class="btn btn-secondary">Cancelar</a>
      </div>
    </form>

    <hr>

    <!-- Mostrar mensajes -->
    {% if messages %}
      <ul class="messages">
        {% for message in messages %}
          <li class="{{ message.tags }}">{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    <!-- Listado de sugerencias del usuario -->
    <h5>Tus sugerencias</h5>
    <ul>
      {% for sug in sugerencias %}
        <li>
          <strong>{{ sug.nombre_usuario }} (ID: {{ sug.usuario.id }})</strong><br>
          {{ sug.comentario }} <br>
          <small>{{ sug.fecha_creacion|date:"d/m/Y H:i" }}</small>
        </li>
      {% empty %}
        <li>No has enviado sugerencias aún.</li>
      {% endfor %}
    </ul>
  </section>
</main>
{% endblock %}
