{% extends 'base.html' %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/diserutas.css' %}">

<div class="container" style="padding-top: 110px; padding-bottom: 50px;">

    <div class="mb-4">
        <a href="{% url 'rutas' %}" class="btn btn-outline-light rounded-pill px-4">
            ← Volver a Categorías
        </a>
    </div>

    <h1 class="text-center text-light fw-bold mb-4">Gestión de Rutas Interurbanas</h1>
    <p class="text-center text-light lead mb-5">Visualiza todas las rutas disponibles.</p>

    <div class="row g-4">
        {% for ruta in rutas %}
        <div class="col-md-6">
            <div class="ruta-card" style="background-image: url({{ ruta.imagen }})">
                <div class="overlay"></div>
                <div class="card-info">
                    <h3>{{ ruta.nombre_ruta }}</h3>
                    <p>Origen: {{ ruta.origen }}</p>
                    <p>Destino: {{ ruta.destino }}</p>
                    <button class="btn-custom btn-sm mt-2" data-bs-toggle="modal" data-bs-target="#modal{{ ruta.id }}"> Ver detalles</button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="text-center mt-5">
        <a href="#" class="btn btn-primary btn-lg">Sugerencias</a>
    </div>

</div>

{% for ruta in rutas %}
<div class="modal fade" id="modal{{ ruta.id }}" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content modal-dark" style="background-color: #212529; color: white;">
            <div class="modal-header border-secondary">
                <h5 class="modal-title">{{ ruta.nombre_ruta }}</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                <p><strong>Origen:</strong> {{ ruta.origen }}</p>
                <p><strong>Destino:</strong> {{ ruta.destino }}</p>
                <p><strong>Tarifa:</strong> ${{ ruta.tarifa }}</p>
                {% if ruta.paradas %}
                <p><strong>Paradas:</strong> {{ ruta.paradas|join:", " }}</p>
                {% endif %}
                {% if ruta.link %}
                <iframe src="{{ ruta.link }}" width="100%" height="500" style="border:0;" allowfullscreen loading="lazy"></iframe>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endfor %}

{% endblock %}